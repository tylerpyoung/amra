"use strict";function clone(e){var t;return e?(t=JSON.parse(JSON.stringify(e)),delete t.prefixPattern,delete t.exactPattern,t):null}function findType(e){return customCards[e]||types[e]}function creditCardType(e){var t,r,n,a=[],s=[];if(!("string"==typeof e||e instanceof String))return[];for(n=0;n<testOrder.length;n++)t=testOrder[n],r=findType(t),0!==e.length?r.exactPattern.test(e)?s.push(clone(r)):r.prefixPattern.test(e)&&a.push(clone(r)):a.push(clone(r));return s.length?s:a}function getCardPosition(e,t){var r=testOrder.indexOf(e);if(!t&&-1===r)throw new Error('"'+e+'" is not a supported card type.');return r}var testOrder,types={},customCards={},VISA="visa",MASTERCARD="mastercard",AMERICAN_EXPRESS="american-express",DINERS_CLUB="diners-club",DISCOVER="discover",JCB="jcb",UNIONPAY="unionpay",MAESTRO="maestro",MIR="mir",CVV="CVV",CID="CID",CVC="CVC",CVN="CVN",CVP2="CVP2",ORIGINAL_TEST_ORDER=[VISA,MASTERCARD,AMERICAN_EXPRESS,DINERS_CLUB,DISCOVER,JCB,UNIONPAY,MAESTRO,MIR];testOrder=clone(ORIGINAL_TEST_ORDER),types[VISA]={niceType:"Visa",type:VISA,prefixPattern:/^4$/,exactPattern:/^4\d*$/,gaps:[4,8,12],lengths:[16,18,19],code:{name:CVV,size:3}},types[MASTERCARD]={niceType:"Mastercard",type:MASTERCARD,prefixPattern:/^(5|5[1-5]|2|22|222|222[1-9]|2[3-6]|27|27[0-2]|2720)$/,exactPattern:/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[0-1]|2720)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:CVC,size:3}},types[AMERICAN_EXPRESS]={niceType:"American Express",type:AMERICAN_EXPRESS,prefixPattern:/^(3|34|37)$/,exactPattern:/^3[47]\d*$/,isAmex:!0,gaps:[4,10],lengths:[15],code:{name:CID,size:4}},types[DINERS_CLUB]={niceType:"Diners Club",type:DINERS_CLUB,prefixPattern:/^(3|3[0689]|30[0-5])$/,exactPattern:/^3(0[0-5]|[689])\d*$/,gaps:[4,10],lengths:[14,16,19],code:{name:CVV,size:3}},types[DISCOVER]={niceType:"Discover",type:DISCOVER,prefixPattern:/^(6|60|601|6011|65|64|64[4-9])$/,exactPattern:/^(6011|65|64[4-9])\d*$/,gaps:[4,8,12],lengths:[16,19],code:{name:CID,size:3}},types[JCB]={niceType:"JCB",type:JCB,prefixPattern:/^(2|21|213|2131|1|18|180|1800|3|35)$/,exactPattern:/^(2131|1800|35)\d*$/,gaps:[4,8,12],lengths:[16,17,18,19],code:{name:CVV,size:3}},types[UNIONPAY]={niceType:"UnionPay",type:UNIONPAY,prefixPattern:/^((6|62|62\d|(621(?!83|88|98|99))|622(?!06)|627[02,06,07]|628(?!0|1)|629[1,2])|622018)$/,exactPattern:/^(((620|(621(?!83|88|98|99))|622(?!06|018)|62[3-6]|627[02,06,07]|628(?!0|1)|629[1,2]))\d*|622018\d{12})$/,gaps:[4,8,12],lengths:[16,17,18,19],code:{name:CVN,size:3}},types[MAESTRO]={niceType:"Maestro",type:MAESTRO,prefixPattern:/^(5|5[06-9]|6\d*)$/,exactPattern:/^(5[06-9]|6[37])\d*$/,gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:CVC,size:3}},types[MIR]={niceType:"Mir",type:MIR,prefixPattern:/^(2|22|220|220[0-4])$/,exactPattern:/^(220[0-4])\d*$/,gaps:[4,8,12],lengths:[16,17,18,19],code:{name:CVP2,size:3}},creditCardType.getTypeInfo=function(e){return clone(findType(e))},creditCardType.removeCard=function(e){var t=getCardPosition(e);testOrder.splice(t,1)},creditCardType.addCard=function(e){var t=getCardPosition(e.type,!0);customCards[e.type]=e,-1===t&&testOrder.push(e.type)},creditCardType.changeOrder=function(e,t){var r=getCardPosition(e);testOrder.splice(r,1),testOrder.splice(t,0,e)},creditCardType.resetModifications=function(){testOrder=clone(ORIGINAL_TEST_ORDER),customCards={}},creditCardType.types={VISA:VISA,MASTERCARD:MASTERCARD,AMERICAN_EXPRESS:AMERICAN_EXPRESS,DINERS_CLUB:DINERS_CLUB,DISCOVER:DISCOVER,JCB:JCB,UNIONPAY:UNIONPAY,MAESTRO:MAESTRO,MIR:MIR},module&&(module.exports=creditCardType);
